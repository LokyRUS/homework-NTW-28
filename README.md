# `IPv4/6 заголовки. Формат заголовков и важные служебные поля в них.`

# Исполнитель: Смирнов Кирилл NTW-28

### Цель задания
1. Проанализировать заголовки пакетов сетевого уровня.
2. Приобрести практические навыки работы с утилитами ping, tracert и ПО Wireshark.
### Задание 1.

1. Запустите ПО Wireshark.
2. Настройте фильтр таким образом, чтобы отображались все фрагменты исходного пакета.
3. Запустите cmd.exe. Нажмите сочетание Win + r.
5. В появившемся окне напишите "cmd".Нажмите "OK".
6. Откроется командная строка.
7. Выполните команду ping до любого адреса пакетами размером более 1500 байт, например ya.ru.


Сколько пакетов до указанного в ping адреса отправлено?

Какие флаги в полях IPv4 заголовка установлены и почему?

*Ответ приведите в виде скриншотов с дампа wireshark. Пояснения к дампу- в свободной форме.*

# Ответ
- Выполним команду ping до адреса `ya.ru` пакетами размером 1600 байт. 

# ![image 1](https://github.com/LokyRUS/homework-NTW-28/blob/nevidimka/images/1.PNG)

До указанного адреса отправлено `8` пакетов, однако ответ не был получен, так как превышен максимально допустимый размер. 

# `ICMP` - пакеты 

- `Флаг №1 Первый бит` - первый бит должен быть всегда равен нулю;

- `Флаг №2 Второй бит` - в нашем случае, значение первого бита ноль, то допускается фрагментация пакетов, но если будет единице, то устройства сети не будут выполнять фрагментацию;
- `Флаг №3 Третий бит` - в нашем случае равен нулю, значит, нет последовательности фрагментированных пакетов. Однако если будет единица, то для конечных узлов это будет означать, что начинается последовательность фрагментированных пакетов, и нужно ждать ещё пакеты, чтобы собрать изначально разделённый пакет.

# ![image 1-1](https://github.com/LokyRUS/homework-NTW-28/blob/nevidimka/images/1-1.PNG)
#  IP-фрагмент
- `Флаг №1 Первый бит` -  ноль;

- `Флаг №2 Второй бит` - ноль;
- `Флаг №3 Третий бит` - единица, это значит узел должен ожидать следующий фрагмент, в данном случае фрагмент ip-пакета. 

------

### Задание 2.

1. Запустите cmd.exe. Нажмите сочетание Win + r.
2. В появившемся окне напишите "cmd".Нажмите "OK".
3. Откроется командная строка.
4. Выполните трассировку до сайта ya.ru. Команда для запуска трассировки tracert. Лучше запускать с ключами -w 1 -d.
Справку по ключам можно получить, выполнив tracert --help.

Сколько хопов в вашей трассировке?

Какие значения TTL установлены в заголовке IPv4 пакета для каждого хопа?

Какой тип icmp сообщения возвращался на каждом этапе трассировки?

Какие src\dst адреса установлены в заголовке IPv4 для пакетов на каждом хопе, почему в исходном запросе и в ответе они отличаются?

Заголовки пакетов проанализируйте в дампе Wireshark. 

*Ответ приведите в виде скриншотов с дампа wireshark. Пояснения к дампу - в свободной форме.*
# Ответ 


# ![image 2](https://github.com/LokyRUS/homework-NTW-28/blob/nevidimka/images/2.PNG)

 ### *- В трассировке 6 hops*
 
 # ![image 3](https://github.com/LokyRUS/homework-NTW-28/blob/nevidimka/images/3.PNG)
 
 ### *- Значения TTL для каждого хопа:*
 - Hop1 = `ttl=1`
 - Hop2 = `ttl=2`
 - Hop3 = `ttl=3`
 - Hop4 = `ttl=4`
 - Hop5 = `ttl=5`
 - Hop6 = `ttl=6`
 
 ### *- тип icmp сообщения возвращающийся на каждом этапе трассировки*
  
  # ![image 4](https://github.com/LokyRUS/homework-NTW-28/blob/nevidimka/images/4.PNG)
- Time - to - live exceeded означает, что время выживания закончилось. 


### *src\dst адреса установлены в заголовке IPv4 для пакетов на каждом хопе, отличаются по тому, что адрес назначения у нас всегда конечное устройство, а получаемые пакеты приходят от промежуточных устройств, в зависимости от установленного ttl, например, при ttl=1 первый же маршрутизатор возвращает обратно ICMP-сообщение, далее увеличивается ttl+1 и так до конечного устройства.*
 # ![image 5](https://github.com/LokyRUS/homework-NTW-28/blob/nevidimka/images/5.PNG)
